<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SkylineANDedClauses2.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Jacoco Report</a> &gt; <a href="index.source.html" class="el_package">algorithms.imageProcessing.optimization</a> &gt; <span class="el_source">SkylineANDedClauses2.java</span></div><h1>SkylineANDedClauses2.java</h1><pre class="source lang-java linenums">package algorithms.imageProcessing.optimization;

/**
 *
 * @author nichole
 */
public class SkylineANDedClauses2 {
    
<span class="fc" id="L9">    private ANDedClauses[] generalClauses = null;</span>
    
<span class="fc" id="L11">    private ANDedClauses[] redOnlyClauses = null;</span>
    
<span class="fc" id="L13">    private ANDedClauses[] blueOnlyClauses = null;</span>
   
<span class="fc" id="L15">    private ANDedClauses[] generalClausesLowerLimits = null;</span>
<span class="fc" id="L16">    private ANDedClauses[] generalClausesUpperLimits = null;</span>
    
<span class="fc" id="L18">    private ANDedClauses[] redOnlyClausesLowerLimits = null;</span>
<span class="fc" id="L19">    private ANDedClauses[] redOnlyClausesUpperLimits = null;</span>
    
<span class="fc" id="L21">    private ANDedClauses[] blueOnlyClausesLowerLimits = null;</span>
<span class="fc" id="L22">    private ANDedClauses[] blueOnlyClausesUpperLimits = null;</span>
    
<span class="fc" id="L24">    public SkylineANDedClauses2() {</span>
        
<span class="fc" id="L26">        initGeneralClauses();</span>
        
<span class="fc" id="L28">        initRedOnlyClauses();</span>
        
<span class="fc" id="L30">        initBlueOnlyClauses();</span>
       
<span class="fc" id="L32">    }</span>
    
    public ANDedClauses[] getAllClauses() {
        
<span class="fc" id="L36">        return copyAndAppend(generalClauses, blueOnlyClauses, redOnlyClauses);</span>
    }
    
    public ANDedClauses[] getAllClausesLowerLimits() {
        
<span class="fc" id="L41">        return copyAndAppend(generalClausesLowerLimits, </span>
            blueOnlyClausesLowerLimits, redOnlyClausesLowerLimits);
    }
    
    public ANDedClauses[] getAllClausesUpperLimits() {
        
<span class="fc" id="L47">        return copyAndAppend(generalClausesUpperLimits, </span>
            blueOnlyClausesUpperLimits, redOnlyClausesUpperLimits);
    }
    
    public ANDedClauses[] getGeneralAndRedClauses() {
        
<span class="fc" id="L53">        return copyAndAppend(generalClauses, redOnlyClauses);</span>
    }
    
    public ANDedClauses[] getGeneralAndRedClausesLowerLimits() {
        
<span class="fc" id="L58">        return copyAndAppend(generalClausesLowerLimits, redOnlyClausesLowerLimits);</span>
    }
    
    public ANDedClauses[] getGeneralAndRedClausesUpperLimits() {
        
<span class="fc" id="L63">        return copyAndAppend(generalClausesUpperLimits, redOnlyClausesUpperLimits);</span>
    }
    
    public ANDedClauses[] getGeneralAndBlueClauses() {
        
<span class="fc" id="L68">        return copyAndAppend(generalClauses, blueOnlyClauses);</span>
    }
    
    public ANDedClauses[] getGeneralAndBlueClausesLowerLimits() {
        
<span class="fc" id="L73">        return copyAndAppend(generalClausesLowerLimits, blueOnlyClausesLowerLimits);</span>
    }
    
    public ANDedClauses[] getGeneralAndBlueClausesUpperLimits() {
        
<span class="fc" id="L78">        return copyAndAppend(generalClausesUpperLimits, blueOnlyClausesUpperLimits);</span>
    }
    
    private ANDedClauses[] copyAndAppend(ANDedClauses[] a0, ANDedClauses[] a1) {
        
<span class="fc" id="L83">        int n = a0.length + a1.length;</span>
    
<span class="fc" id="L85">        ANDedClauses[] a = new ANDedClauses[n];</span>
<span class="fc bfc" id="L86" title="All 2 branches covered.">        for (int i = 0; i &lt; a0.length; i++) {</span>
<span class="fc" id="L87">            a[i] = a0[i].copy();</span>
        }
        
<span class="pc bpc" id="L90" title="1 of 2 branches missed.">        for (int i = 0; i &lt; a1.length; i++) {</span>
<span class="nc" id="L91">            a[i + a0.length] = a1[i].copy();</span>
        }
        
<span class="fc" id="L94">        return a;</span>
    }
    
    private ANDedClauses[] copyAndAppend(ANDedClauses[] a0, ANDedClauses[] a1,
        ANDedClauses[] a2) {
        
<span class="fc" id="L100">        int n = a0.length + a1.length + a2.length;</span>
    
<span class="fc" id="L102">        ANDedClauses[] a = new ANDedClauses[n];</span>
        
<span class="fc bfc" id="L104" title="All 2 branches covered.">        for (int i = 0; i &lt; a0.length; i++) {</span>
<span class="fc" id="L105">            a[i] = a0[i].copy();</span>
        }
        
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">        for (int i = 0; i &lt; a1.length; i++) {</span>
<span class="nc" id="L109">            a[i + a0.length] = a1[i].copy();</span>
        }
        
<span class="pc bpc" id="L112" title="1 of 2 branches missed.">        for (int i = 0; i &lt; a2.length; i++) {</span>
<span class="nc" id="L113">            a[i + a0.length + a1.length] = a2[i].copy();</span>
        }
        
<span class="fc" id="L116">        return a;</span>
    }
    
    private void initGeneralClauses() {
        
<span class="fc" id="L121">        float customCoeffPlaceHolder = Float.MAX_VALUE;</span>
        
        /*
        00         (skyStDevContrast &gt; 0.)
        01         &amp;&amp; ((Math.abs(contrastV)/skyStDevContrast) &gt; 10.)   RANGE 0.1 to 10.
        */        
<span class="fc" id="L127">        ANDedClauses c0 = new ANDedClauses(2, SKYCONDITIONAL.ALL);</span>
<span class="fc" id="L128">        c0.set(0, PARAM.STDEV_CONTRAST, PARAM.INT_ONE, </span>
            COMPARISON.GREATER_THAN, 0.04f);
<span class="fc" id="L130">        c0.set(1, PARAM.ABSOLUTE_CONTRAST, PARAM.STDEV_CONTRAST, </span>
            COMPARISON.GREATER_THAN, 7.03f);
        
<span class="fc" id="L133">        ANDedClauses c0Lower = c0.copy();</span>
<span class="fc" id="L134">        ANDedClauses c0Upper = c0.copy();</span>
<span class="fc" id="L135">        c0Lower.coefficients[0] = 0.00001f;</span>
<span class="fc" id="L136">        c0Upper.coefficients[0] = 0.2f;</span>
<span class="fc" id="L137">        c0Lower.coefficients[1] = 0.75f;</span>
<span class="fc" id="L138">        c0Upper.coefficients[1] = 10.0f;</span>
        
        /*
        } else if (// 1.5 + (0.006911656819283962 - 0.72999996)*(-1.8))
        02         (skyStDevContrast &gt; 0.)
        03         &amp;&amp; ((Math.abs(contrastV) &gt; 0.1)                     RANGE 0.01 to 1.0
        04,05,06   &amp;&amp; ((Math.abs(contrastV)/skyStDevContrast) &gt; (1.5 + (Math.abs(contrastV)-0.5)*(-2.0))))
                                                                 0.5                        0.1   -3
                                                                 3.5                        1.0   +1
        */
        
<span class="fc" id="L149">        ANDedClauses c1 = new ANDedClauses(3, SKYCONDITIONAL.ALL);</span>
<span class="fc" id="L150">        c1.set(0, PARAM.STDEV_CONTRAST, PARAM.INT_ONE, </span>
            COMPARISON.GREATER_THAN, 0.12f);
<span class="fc" id="L152">        c1.set(1, PARAM.ABSOLUTE_CONTRAST, PARAM.INT_ONE, </span>
            COMPARISON.GREATER_THAN, 0.406f);
        
        // this is replaced by the custom coefficient
<span class="fc" id="L156">        c1.set(2, PARAM.ABSOLUTE_CONTRAST, PARAM.STDEV_CONTRAST, </span>
            COMPARISON.GREATER_THAN, customCoeffPlaceHolder);
<span class="fc" id="L158">        c1.setACustomCoefficient(2, new CustomCoeff00()); </span>
<span class="fc" id="L159">        c1.setCustomCoefficientVariable(4, Float.valueOf(1.55f));</span>
<span class="fc" id="L160">        c1.setCustomCoefficientVariable(5, Float.valueOf(0.55f));</span>
<span class="fc" id="L161">        c1.setCustomCoefficientVariable(6, Float.valueOf(-1.8f));</span>
        
<span class="fc" id="L163">        ANDedClauses c1Lower = c1.copy();</span>
<span class="fc" id="L164">        ANDedClauses c1Upper = c1.copy();</span>
<span class="fc" id="L165">        c1Lower.coefficients[0] = 0.00001f;</span>
<span class="fc" id="L166">        c1Upper.coefficients[0] = 0.2f;</span>
<span class="fc" id="L167">        c1Lower.coefficients[1] = 0.01f;</span>
<span class="fc" id="L168">        c1Upper.coefficients[1] = 1.0f;</span>
<span class="fc" id="L169">        c1Lower.customCoefficientVariables.put(Integer.valueOf(4), </span>
<span class="fc" id="L170">            Float.valueOf(0.5f));</span>
<span class="fc" id="L171">        c1Upper.customCoefficientVariables.put(Integer.valueOf(4), </span>
<span class="fc" id="L172">            Float.valueOf(4.0f));</span>
<span class="fc" id="L173">        c1Lower.customCoefficientVariables.put(Integer.valueOf(5), </span>
<span class="fc" id="L174">            Float.valueOf(0.1f));</span>
<span class="fc" id="L175">        c1Upper.customCoefficientVariables.put(Integer.valueOf(5), </span>
<span class="fc" id="L176">            Float.valueOf(1.0f));</span>
<span class="fc" id="L177">        c1Lower.customCoefficientVariables.put(Integer.valueOf(6), </span>
<span class="fc" id="L178">            Float.valueOf(-3.0f));</span>
<span class="fc" id="L179">        c1Upper.customCoefficientVariables.put(Integer.valueOf(6), </span>
<span class="fc" id="L180">            Float.valueOf(1.0f));</span>
        
        //} else if (
        //07         (skyStDevColorDiff &gt; 0.0)
        //08         &amp;&amp; ((Math.abs(colorDiffV)/skyStDevColorDiff) &gt; 5.)  RANGE 0.5 to 5.
<span class="fc" id="L185">        ANDedClauses c2 = new ANDedClauses(2, SKYCONDITIONAL.ALL);</span>
<span class="fc" id="L186">        c2.set(0, PARAM.STDEV_BLUE_OR_RED, PARAM.INT_ONE, </span>
            COMPARISON.GREATER_THAN, 0.0f);
<span class="fc" id="L188">        c2.set(1, PARAM.ABSOLUTE_DIFF_BLUE_OR_RED, PARAM.STDEV_BLUE_OR_RED, </span>
            COMPARISON.GREATER_THAN, 3.65f);
       
<span class="fc" id="L191">        ANDedClauses c2Lower = c2.copy();</span>
<span class="fc" id="L192">        ANDedClauses c2Upper = c2.copy();</span>
<span class="fc" id="L193">        c2Lower.coefficients[0] = 0.00001f;</span>
<span class="fc" id="L194">        c2Upper.coefficients[0] = 0.5f;</span>
<span class="fc" id="L195">        c2Lower.coefficients[1] = 0.5f;</span>
<span class="fc" id="L196">        c2Upper.coefficients[1] = 5.0f;</span>
        
        
        //} else if (
        //08         (diffCIEX &gt; 0.005)
        //09         ((diffCIEX/localSky.getStdDevCIEX()) &gt; 1.5)         RANGE 0.5 to 5.
        
<span class="fc" id="L203">        ANDedClauses c3 = new ANDedClauses(2, SKYCONDITIONAL.ALL);</span>
<span class="fc" id="L204">        c3.set(0, PARAM.DIFF_CIEX, PARAM.INT_ONE, </span>
            COMPARISON.GREATER_THAN, 0.4f);
<span class="fc" id="L206">        c3.set(1, PARAM.DIFF_CIEX, PARAM.STDEV_CIEX, </span>
            COMPARISON.GREATER_THAN, 2.75f);
        
<span class="fc" id="L209">        ANDedClauses c3Lower = c3.copy();</span>
<span class="fc" id="L210">        ANDedClauses c3Upper = c3.copy();</span>
<span class="fc" id="L211">        c3Lower.coefficients[0] = 0.00001f;</span>
<span class="fc" id="L212">        c3Upper.coefficients[0] = 0.5f;</span>
<span class="fc" id="L213">        c3Lower.coefficients[1] = 0.5f;</span>
<span class="fc" id="L214">        c3Upper.coefficients[1] = 5.0f;</span>
        
        //} else if (
        //10         (diffCIEX &gt; 0.005)
        //11         ((diffCIEX/localSky.getStdDevCIEX()) &gt; 1.5)         RANGE 0.5 to 5.
<span class="fc" id="L219">        ANDedClauses c4 = new ANDedClauses(2, SKYCONDITIONAL.ALL);</span>
<span class="fc" id="L220">        c4.set(0, PARAM.DIFF_CIEY, PARAM.INT_ONE, </span>
            COMPARISON.GREATER_THAN, 1.E-5f);
<span class="fc" id="L222">        c4.set(1, PARAM.DIFF_CIEY, PARAM.STDEV_CIEY, </span>
            COMPARISON.GREATER_THAN, 0.5f);
       
<span class="fc" id="L225">        ANDedClauses c4Lower = c4.copy();</span>
<span class="fc" id="L226">        ANDedClauses c4Upper = c4.copy();</span>
<span class="fc" id="L227">        c4Lower.coefficients[0] = 0.00001f;</span>
<span class="fc" id="L228">        c4Upper.coefficients[0] = 0.5f;</span>
<span class="fc" id="L229">        c4Lower.coefficients[1] = 0.5f;</span>
<span class="fc" id="L230">        c4Upper.coefficients[1] = 5.0f;</span>
        
        
<span class="fc" id="L233">        generalClausesLowerLimits = new ANDedClauses[]{</span>
            c0Lower, c1Lower, c2Lower, c3Lower, c4Lower
        };
        
<span class="fc" id="L237">        generalClausesUpperLimits = new ANDedClauses[]{</span>
            c0Upper, c1Upper, c2Upper, c3Upper, c4Upper
        };
    
<span class="fc" id="L241">        generalClauses = new ANDedClauses[]{c0, c1, c2, c3, c4</span>
        };
<span class="fc" id="L243">    }</span>
    
    private void initRedOnlyClauses() {        
        
<span class="fc" id="L247">        redOnlyClausesLowerLimits = new ANDedClauses[]{};</span>
        
<span class="fc" id="L249">        redOnlyClausesUpperLimits = new ANDedClauses[]{};</span>
    
<span class="fc" id="L251">        redOnlyClauses = new ANDedClauses[]{};</span>
   
<span class="fc" id="L253">    }</span>
    
    private void initBlueOnlyClauses() {
        
<span class="fc" id="L257">        blueOnlyClausesLowerLimits = new ANDedClauses[]{};</span>
        
<span class="fc" id="L259">        blueOnlyClausesUpperLimits = new ANDedClauses[]{};</span>
        
<span class="fc" id="L261">        blueOnlyClauses = new ANDedClauses[]{};</span>
   
<span class="fc" id="L263">    }</span>
    
    /*
    =================
    ALL:
    ==============
    } else if (
        00         (skyStDevContrast &gt; 0.)
        01         &amp;&amp; ((Math.abs(contrastV)/skyStDevContrast) &gt; 10.)   RANGE 0.1 to 10.
        } else if (
        02         (skyStDevContrast &gt; 0.)
        03         &amp;&amp; ((Math.abs(contrastV) &gt; 0.1)                     RANGE 0.01 to 1.0
        04,05,06   &amp;&amp; ((Math.abs(contrastV)/skyStDevContrast) &gt; (1.5 + (Math.abs(contrastV)-0.5)*(-2.0))))
                                                                 0.5                        0.1   -3
                                                                 3.5                        1.0   +1
        } else if (
        07         (skyStDevColorDiff &gt; 0.0)
        08         &amp;&amp; ((Math.abs(colorDiffV)/skyStDevColorDiff) &gt; 5.)  RANGE 0.5 to 5.
        } else if (
        08         (diffCIEX &gt; 0.005)
        09         ((diffCIEX/localSky.getStdDevCIEX()) &gt; 1.5)         RANGE 0.5 to 5.
        } else if (
        10         (diffCIEY &gt; 0.005)
        11         ((diffCIEY/localSky.getStdDevCIEY()) &gt; 1.5)         RANGE 0.5 to 5.
    
    If choose starter points as low, mid, high, there would need to be
    3^12 starter points for a proper range search = 531,441 starter points.
    
    If only had 6 coefficients, a range search would be complete with 729 starter points.
    
    The range search using starter points is then local search thereafter. The top
    10 fits' coefficients are retained and the others discarded.
    */
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>