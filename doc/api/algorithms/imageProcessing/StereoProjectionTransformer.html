<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Mon Dec 01 22:03:18 PST 2014 -->
<title>StereoProjectionTransformer</title>
<meta name="date" content="2014-12-01">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StereoProjectionTransformer";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../algorithms/imageProcessing/SobelY.html" title="class in algorithms.imageProcessing"><span class="strong">Prev Class</span></a></li>
<li><a href="../../algorithms/imageProcessing/TransformationPair.html" title="class in algorithms.imageProcessing"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?algorithms/imageProcessing/StereoProjectionTransformer.html" target="_top">Frames</a></li>
<li><a href="StereoProjectionTransformer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">algorithms.imageProcessing</div>
<h2 title="Class StereoProjectionTransformer" class="title">Class StereoProjectionTransformer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>algorithms.imageProcessing.StereoProjectionTransformer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">StereoProjectionTransformer</span>
extends java.lang.Object</pre>
<div class="block">class to solve for the epipoles for two images with stereo projection
 and apply the solution.
 
 Following:
 
 IEEE TRANSACTIONS ON PATTERN ANALYSIS AND MACHINE INTELLIGENCE, VOL. 19, 
 NO. 6, JUNE 1997
 "In Defense of the Eight-Point Algorithm" by Richard Hartley

 The 8-point algorithm matrix represents epipolar geometry, and can be
 used with data from cameras whose characteristics are not known to solve
 up to the projective transformation.
 
 Some definitions:
    u^T*v represents the inner product
    u*v^T is a matrix
    the norm of a vector f is the square root of the sum or squares of its 
        entries.
    u_1 is the (x,y) points from image 1 and u_2 are the matched (x,y) points 
        from image 2.

    the fundamental matrix is defined:
        u_2^T * F * u_1 = 0  where u are the x,y points in images _1 and _2

    u_1 = (x_1, y_1, 1)^T
    u_2 = (x_2, y_2, 1)^T

    x_1*x_2*F_1_1 + x_1*y_2*F_2_1 + x_1*F_3_1 + y_1*x_2*F_1_2 + y_1*y_2*F_2_2
        + y_1*F_3_2 + x_2*F_1_3 + y_2*F_2_3 + F_3_3 = 0

    A * f = 0

    where A = x_1*x_2, x_1*y_2, x_1, y_1*x_2, y_1*y_2, y_1, x_2, y_2, 1

    To avoid the trivial scale, ||f|| = 1 where f is the norm of f

    And we need least squares fits because the set may be over determined 
    and not have a zero solution.

    we want the vector f that minimizes ||A*f|| subject to the constraint
    that ||f|| = f^T*f = 1

    the solution is the unit eigenvector corresponding to the smallest 
    eigenvalue of A^T*A.

    Since A^T*A is semi-definite and symmetric, all of its eigenvectors
    are real and positive or zero.
    This eigenvector is what he calls the least eigenvector of A^T*A and
    it is found via the Jacobi algorithm or Singular Value Decomposition.

    The solved for matrix will in general not have rank 2 and needs to, so
    further corrections are necessary:
        matrix F is replaced by F' that minimizes the Frobenius norm
        ||F - F'|| subject to the condition det F' = 0.
        A convenient method of doing this is to use the Singular Value
        Decomposition (SVD).
           let F = U*D*V^T be the SVD of F, where D is diagonal matrix 
           D = diag(r, s, t) satisfying r >= s >= t.
           let F' = U*diag(r, s, 0)*V^T.

 (1) Transforming the coordinates:

     Normalization for isotropic scaling.

     utrans = T * u ==> u = utrans * inv(T)

     u_2^T * F * u_1 = 0 

        becomes   utrans_2^T * inv(T_2) * F * inv(T_1) * utrans_1 = 0

        and inv(T_2) * F * inv(T_1) is the fundamental matrix for
        utrans_2 < -- > utrans_1 which when found, will be subsequently
        denormalized.

    a) points are translated so that their centroid is at the origin.
    b) points are then scaled so that the average distance from the
       origin is sqrt(2)
    c) the transformation is applied to each of the 2 images separately.

 (2) build matrix A with the normalized x,y points

 (3) compute linear least square solution to the least eigenvector of f.
     solve A = U * D * V^T   for A*f = [..x...]*f = 0
     A has rank 8.  f has rank 2.
     calculate [U,D,V] from svd(A)

 (4) make the fundamental matrix have a rank of 2
     by performing a svd and then reconstructing with the two largest 
     singular values.
         [U,D,V] = svd(F,0);
         F = U * diag([D(1,1) D(2,2) 0]) * V'; 

 (5) denormalize the fundamental matrix
     The related part of the normalization equation: inv(T_2) * F * inv(T_1)
     so denormalizing is:

         F = (T_1)^T * F * T_2

 (6) estimate the error in the fundamental matrix by calculting epipolar
     lines for points in image 1 and find their nearest points in image 2 
     and measure the perpendicular distance from the epipolar line for
     those nearest points.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>nichole</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../algorithms/imageProcessing/StereoProjectionTransformer.html#StereoProjectionTransformer()">StereoProjectionTransformer</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../algorithms/imageProcessing/StereoProjectionTransformer.html#calculateEpipolarProjection(algorithms.util.PairFloatArray, algorithms.util.PairFloatArray)">calculateEpipolarProjection</a></strong>(<a href="../../algorithms/util/PairFloatArray.html" title="class in algorithms.util">PairFloatArray</a>&nbsp;refactorLeftXY,
                           <a href="../../algorithms/util/PairFloatArray.html" title="class in algorithms.util">PairFloatArray</a>&nbsp;refactorRightXY)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected Jama.Matrix</code></td>
<td class="colLast"><code><strong><a href="../../algorithms/imageProcessing/StereoProjectionTransformer.html#calculateFundamentalMatrix(Jama.Matrix, Jama.Matrix)">calculateFundamentalMatrix</a></strong>(Jama.Matrix&nbsp;leftXY,
                          Jama.Matrix&nbsp;rightXY)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../algorithms/imageProcessing/StereoProjectionTransformer.html#drawEpipolarLinesOnImage(algorithms.imageProcessing.Image, double[][])">drawEpipolarLinesOnImage</a></strong>(<a href="../../algorithms/imageProcessing/Image.html" title="class in algorithms.imageProcessing">Image</a>&nbsp;image,
                        double[][]&nbsp;epipolarLines)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../algorithms/imageProcessing/StereoProjectionTransformer.html#drawPointsOnImage(algorithms.imageProcessing.Image, Jama.Matrix)">drawPointsOnImage</a></strong>(<a href="../../algorithms/imageProcessing/Image.html" title="class in algorithms.imageProcessing">Image</a>&nbsp;image,
                 Jama.Matrix&nbsp;xyPoints)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected Jama.Matrix</code></td>
<td class="colLast"><code><strong><a href="../../algorithms/imageProcessing/StereoProjectionTransformer.html#rewriteInto3ColumnMatrix(algorithms.util.PairFloatArray)">rewriteInto3ColumnMatrix</a></strong>(<a href="../../algorithms/util/PairFloatArray.html" title="class in algorithms.util">PairFloatArray</a>&nbsp;xyPairs)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="StereoProjectionTransformer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StereoProjectionTransformer</h4>
<pre>public&nbsp;StereoProjectionTransformer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="calculateEpipolarProjection(algorithms.util.PairFloatArray, algorithms.util.PairFloatArray)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateEpipolarProjection</h4>
<pre>public&nbsp;void&nbsp;calculateEpipolarProjection(<a href="../../algorithms/util/PairFloatArray.html" title="class in algorithms.util">PairFloatArray</a>&nbsp;refactorLeftXY,
                               <a href="../../algorithms/util/PairFloatArray.html" title="class in algorithms.util">PairFloatArray</a>&nbsp;refactorRightXY)</pre>
</li>
</ul>
<a name="calculateFundamentalMatrix(Jama.Matrix, Jama.Matrix)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateFundamentalMatrix</h4>
<pre>protected&nbsp;Jama.Matrix&nbsp;calculateFundamentalMatrix(Jama.Matrix&nbsp;leftXY,
                                     Jama.Matrix&nbsp;rightXY)</pre>
</li>
</ul>
<a name="rewriteInto3ColumnMatrix(algorithms.util.PairFloatArray)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rewriteInto3ColumnMatrix</h4>
<pre>protected&nbsp;Jama.Matrix&nbsp;rewriteInto3ColumnMatrix(<a href="../../algorithms/util/PairFloatArray.html" title="class in algorithms.util">PairFloatArray</a>&nbsp;xyPairs)</pre>
</li>
</ul>
<a name="drawEpipolarLinesOnImage(algorithms.imageProcessing.Image, double[][])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawEpipolarLinesOnImage</h4>
<pre>void&nbsp;drawEpipolarLinesOnImage(<a href="../../algorithms/imageProcessing/Image.html" title="class in algorithms.imageProcessing">Image</a>&nbsp;image,
                            double[][]&nbsp;epipolarLines)</pre>
</li>
</ul>
<a name="drawPointsOnImage(algorithms.imageProcessing.Image, Jama.Matrix)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>drawPointsOnImage</h4>
<pre>void&nbsp;drawPointsOnImage(<a href="../../algorithms/imageProcessing/Image.html" title="class in algorithms.imageProcessing">Image</a>&nbsp;image,
                     Jama.Matrix&nbsp;xyPoints)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../algorithms/imageProcessing/SobelY.html" title="class in algorithms.imageProcessing"><span class="strong">Prev Class</span></a></li>
<li><a href="../../algorithms/imageProcessing/TransformationPair.html" title="class in algorithms.imageProcessing"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?algorithms/imageProcessing/StereoProjectionTransformer.html" target="_top">Frames</a></li>
<li><a href="StereoProjectionTransformer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
